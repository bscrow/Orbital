{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\Orbital\\\\Orbital-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\Orbital\\\\Orbital-master\\\\src\\\\Components\\\\Planning\\\\Timeline\\\\Topbar.js\";\nimport React from 'react';\nimport { Collapse, Navbar, NavbarToggler, Nav, NavItem, NavLink, UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem, Modal, Button, Spinner } from 'reactstrap';\nimport fb from '../../Config/config';\nimport NOC from '../Programme/NOC';\nimport Exchange from '../Programme/Exchange';\nimport Internship from '../Programme/Internship';\nimport CourseInfo from './CourseInfo';\nimport CustomModule from './CustomModule';\nimport PlaNUSIcon from '../../../Images/PlaNUSIcon2.png';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\nexport default class Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.toggle = this.toggle.bind(this);\n    this.handleSignOut = this.handleSignOut.bind(this);\n    this.handleSaveEvent = this.handleSaveEvent.bind(this);\n    this.handleExport = this.handleExport.bind(this);\n    this.toggleSignOutModal = this.toggleSignOutModal.bind(this);\n    this.setNOC = this.setNOC.bind(this);\n    this.setExchange = this.setExchange.bind(this);\n    this.setFocusArea = this.setFocusArea.bind(this);\n    this.state = {\n      isOpen: false,\n      NOCData: null,\n      exchangeData: {\n        country: null,\n        school: null,\n        year: null,\n        semester: null,\n        codeString: null,\n        moduleMapping: []\n      },\n      focusAreaData: null,\n      openSignOutModal: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        isLoading: true\n      });\n    });\n    const userEmail = fb.auth().currentUser.email;\n    var db = fb.firestore();\n    db.collection('users').doc(userEmail).get().then(doc => {\n      if (!doc.exists) {\n        console.log('Error retrieving user data from database');\n      } else {\n        const userPrevInfo = doc.data();\n        this.setState(prevState => {\n          return _objectSpread({}, prevState, {\n            isLoading: false,\n            exchangeData: userPrevInfo.exchangeData,\n            NOCData: userPrevInfo.NOCData\n          });\n        });\n      }\n    });\n  }\n\n  toggle() {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        isOpen: !prevState.isOpen\n      });\n    });\n  }\n\n  toggleSignOutModal() {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        openSignOutModal: !prevState.openSignOutModal\n      });\n    });\n  }\n\n  handleSignOut() {\n    fb.auth().signOut();\n  }\n\n  handleExport(timelineData) {\n    var counter = 5;\n\n    for (var arr in timelineData) {\n      if (timelineData[arr].length > counter) {\n        counter = timelineData[arr].length;\n      }\n    }\n\n    console.log(counter);\n    var data = {\n      timelineData: timelineData,\n      maxCount: counter\n    };\n    axios.post('/create-pdf', data).then(() => axios.get('fetch-pdf', {\n      responseType: 'blob'\n    })).then(res => {\n      const pdfBlob = new Blob([res.data], {\n        type: 'application/pdf'\n      });\n      saveAs(pdfBlob, 'timeline.pdf');\n    });\n  }\n\n  handleSaveEvent() {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        isLoading: true\n      });\n    });\n    const userEmail = fb.auth().currentUser.email;\n    var firestoreDatabase = fb.firestore();\n    firestoreDatabase.collection('users').doc(userEmail).get().then(doc => {\n      if (!doc.exists) {\n        console.log('Document does not exists');\n      } else {\n        var userPrevInfo = doc.data();\n        var updatedData = {\n          email: userPrevInfo.email,\n          course: userPrevInfo.course,\n          timelineData: this.props.timelineData,\n          graphData: this.props.graphData,\n          exchangeData: this.state.exchangeData,\n          NOCData: this.state.NOCData\n        };\n        firestoreDatabase.collection('users').doc(userEmail).set(updatedData);\n        this.setState(prevState => {\n          return _objectSpread({}, prevState, {\n            isLoading: false\n          });\n        });\n        alert('Saved successfully!');\n      }\n    }).catch(err => {\n      console.log('Error retrieving data from database');\n    });\n  }\n  /*\r\n  ... syntax sugar to copy state objects!\r\n  fakeSaveButton() {\r\n    this.setState(prevState => {\r\n      return {\r\n        ...prevState,=> Copies all attributes of prevState\r\n        internship: true, => Overwrites prevState's internship attribute\r\n        focusArea: true\r\n      }\r\n    })\r\n  }\r\n  */\n\n\n  setFocusArea(obj) {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        focusAreaData: obj\n      });\n    });\n  }\n\n  setExchange(obj) {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        exchangeData: obj\n      });\n    });\n  }\n\n  setNOC(obj) {\n    this.setState(prevState => {\n      return _objectSpread({}, prevState, {\n        NOCData: obj\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      class: \"Topbar\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      isOpen: this.state.openSignOutModal,\n      toggle: this.toggleSignOutModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        margin: '20px',\n        fontSize: '20px',\n        fontWeight: 'bold',\n        fontFamily: 'Arial',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Remember to save your plan before signing out! \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(Button, {\n      color: \"danger\",\n      onClick: this.handleSignOut,\n      style: {\n        width: '30%',\n        margin: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Get me out of here!\"))), this.state.isLoading ? React.createElement(\"div\", {\n      style: {\n        display: 'grid',\n        position: 'absolute',\n        width: '100vw',\n        height: '100vh',\n        alignItems: 'center',\n        justifyItems: 'center',\n        background: 'rgba(0,0,0,0.5)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Spinner, {\n      style: {\n        width: '100px',\n        height: '100px'\n      },\n      color: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })) : null, React.createElement(Navbar, {\n      color: \"light\",\n      light: true,\n      expand: \"md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        position: \"absolute\",\n        maxHeight: \"56px\",\n        marginLeft: \"-10px\",\n        cursor: \"pointer\"\n      },\n      title: \"Click to reset to the previous saved point!\",\n      onClick: () => window.location.reload(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: PlaNUSIcon,\n      alt: \"PlaNUS\",\n      height: \"56\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    })), React.createElement(NavbarToggler, {\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(Collapse, {\n      isOpen: this.state.isOpen,\n      navbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      className: \"ml-auto\",\n      navbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: this.props.toggleTimeline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Timeline\")), React.createElement(CustomModule, {\n      addToTimeline: this.props.addToTimeline,\n      timelineData: this.props.timelineData,\n      removeFromTimeline: this.props.removeFromTimeline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), React.createElement(NavItem, {\n      style: {\n        cursor: \"pointer\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      onClick: this.handleSaveEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Save\")), React.createElement(CourseInfo, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }), React.createElement(UncontrolledDropdown, {\n      nav: true,\n      inNavbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      nav: true,\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Special Programmes\"), React.createElement(DropdownMenu, {\n      right: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(NOC, {\n      timelineData: this.props.timelineData,\n      addToTimeline: this.props.addToTimeline,\n      removeFromTimeline: this.props.removeFromTimeline,\n      setNOC: this.setNOC,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      onClick: () => alert('Coming soon!'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"Research\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), React.createElement(Exchange, {\n      timelineData: this.props.timelineData,\n      addToTimeline: this.props.addToTimeline,\n      removeFromTimeline: this.props.removeFromTimeline,\n      setExchange: this.setExchange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(Internship, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }))), React.createElement(UncontrolledDropdown, {\n      nav: true,\n      inNavbar: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      nav: true,\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Settings\"), React.createElement(DropdownMenu, {\n      right: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(DropdownItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Profile\"), React.createElement(DropdownItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Help\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      onClick: () => this.handleExport(this.props.timelineData),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Export Timeline\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      onClick: this.toggleSignOutModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Sign Out\")))))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Lenovo\\Desktop\\Orbital\\Orbital-master\\src\\Components\\Planning\\Timeline\\Topbar.js"],"names":["React","Collapse","Navbar","NavbarToggler","Nav","NavItem","NavLink","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","Modal","Button","Spinner","fb","NOC","Exchange","Internship","CourseInfo","CustomModule","PlaNUSIcon","axios","saveAs","Sidebar","Component","constructor","props","toggle","bind","handleSignOut","handleSaveEvent","handleExport","toggleSignOutModal","setNOC","setExchange","setFocusArea","state","isOpen","NOCData","exchangeData","country","school","year","semester","codeString","moduleMapping","focusAreaData","openSignOutModal","componentDidMount","setState","prevState","isLoading","userEmail","auth","currentUser","email","db","firestore","collection","doc","get","then","exists","console","log","userPrevInfo","data","signOut","timelineData","counter","arr","length","maxCount","post","responseType","res","pdfBlob","Blob","type","firestoreDatabase","updatedData","course","graphData","set","alert","catch","err","obj","render","width","margin","fontSize","fontWeight","fontFamily","textAlign","display","position","height","alignItems","justifyItems","background","maxHeight","marginLeft","cursor","window","location","reload","toggleTimeline","addToTimeline","removeFromTimeline"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n    Collapse,\r\n    Navbar,\r\n    NavbarToggler,\r\n    Nav,\r\n    NavItem,\r\n    NavLink,\r\n    UncontrolledDropdown,\r\n    DropdownToggle,\r\n    DropdownMenu,\r\n    DropdownItem,\r\n    Modal,\r\n    Button,\r\n    Spinner\r\n   } from 'reactstrap';\r\nimport fb from '../../Config/config';\r\nimport NOC from '../Programme/NOC';\r\nimport Exchange from '../Programme/Exchange';\r\nimport Internship from '../Programme/Internship';\r\nimport CourseInfo from './CourseInfo';\r\nimport CustomModule from './CustomModule';\r\nimport PlaNUSIcon from '../../../Images/PlaNUSIcon2.png';\r\nimport axios from 'axios';\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport default class Sidebar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.toggle = this.toggle.bind(this);\r\n        this.handleSignOut = this.handleSignOut.bind(this);\r\n        this.handleSaveEvent = this.handleSaveEvent.bind(this);\r\n        this.handleExport = this.handleExport.bind(this);\r\n        this.toggleSignOutModal = this.toggleSignOutModal.bind(this);\r\n        this.setNOC = this.setNOC.bind(this);\r\n        this.setExchange = this.setExchange.bind(this);\r\n        this.setFocusArea = this.setFocusArea.bind(this);\r\n        this.state = {\r\n          isOpen: false,\r\n          NOCData: null,\r\n          exchangeData: {\r\n            country: null,\r\n            school: null,\r\n            year: null,\r\n            semester: null,\r\n            codeString: null,\r\n            moduleMapping: []\r\n          },\r\n          focusAreaData: null,\r\n          openSignOutModal: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          isLoading: true\r\n        }\r\n      })\r\n      const userEmail = fb.auth().currentUser.email;\r\n      var db = fb.firestore();\r\n      db.collection('users').doc(userEmail).get().then(doc => {\r\n        if (!doc.exists) {\r\n          console.log('Error retrieving user data from database');\r\n        } else {\r\n          const userPrevInfo = doc.data();\r\n          this.setState(prevState => {\r\n            return {\r\n              ...prevState,\r\n              isLoading: false,\r\n              exchangeData: userPrevInfo.exchangeData,\r\n              NOCData: userPrevInfo.NOCData\r\n            }\r\n          })\r\n        }\r\n      });\r\n    }\r\n\r\n    toggle() {\r\n        this.setState(prevState => {\r\n            return {\r\n              ...prevState,\r\n              isOpen: !prevState.isOpen\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleSignOutModal() {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          openSignOutModal: !prevState.openSignOutModal\r\n        }\r\n      })\r\n    }\r\n\r\n    handleSignOut() {\r\n        fb.auth().signOut();\r\n    }\r\n\r\n    handleExport(timelineData) {\r\n      var counter = 5;\r\n      for (var arr in timelineData) {\r\n        if (timelineData[arr].length > counter) {\r\n          counter = timelineData[arr].length;\r\n        }\r\n      }\r\n      console.log(counter);\r\n      var data = {\r\n        timelineData: timelineData,\r\n        maxCount: counter\r\n      }\r\n      axios.post('/create-pdf', data)\r\n      .then(() => axios.get('fetch-pdf', {responseType: 'blob'}))\r\n      .then((res) => {\r\n        const pdfBlob = new Blob([res.data], {type: 'application/pdf'});\r\n        saveAs(pdfBlob, 'timeline.pdf');\r\n      });\r\n    }\r\n\r\n    handleSaveEvent() {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          isLoading: true\r\n        }\r\n      });\r\n      const userEmail = fb.auth().currentUser.email;\r\n      var firestoreDatabase = fb.firestore();\r\n      firestoreDatabase.collection('users').doc(userEmail).get().then(doc => {\r\n        if (!doc.exists) {\r\n          console.log('Document does not exists');\r\n        } else {\r\n          var userPrevInfo = doc.data();\r\n          var updatedData = {\r\n            email: userPrevInfo.email,\r\n            course: userPrevInfo.course,\r\n            timelineData: this.props.timelineData,\r\n            graphData: this.props.graphData,\r\n            exchangeData: this.state.exchangeData,\r\n            NOCData: this.state.NOCData\r\n          }\r\n          firestoreDatabase.collection('users').doc(userEmail).set(updatedData);\r\n          this.setState(prevState => {\r\n            return {\r\n              ...prevState,\r\n              isLoading: false\r\n            }\r\n          });\r\n          alert('Saved successfully!');\r\n        }\r\n      }).catch(err => { console.log('Error retrieving data from database')});\r\n    }\r\n\r\n    /*\r\n    ... syntax sugar to copy state objects!\r\n    fakeSaveButton() {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,=> Copies all attributes of prevState\r\n          internship: true, => Overwrites prevState's internship attribute\r\n          focusArea: true\r\n        }\r\n      })\r\n    }\r\n    */\r\n\r\n    setFocusArea(obj) {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          focusAreaData: obj\r\n        }\r\n      })\r\n    }\r\n\r\n    setExchange(obj) {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          exchangeData: obj\r\n        }\r\n      })\r\n    }\r\n\r\n    setNOC(obj) {\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          NOCData: obj\r\n        }\r\n      })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n          <div class=\"Topbar\" style={{width: \"100%\"}}>\r\n            <Modal isOpen={this.state.openSignOutModal} toggle={this.toggleSignOutModal}>\r\n              <div style={{margin: '20px', fontSize: '20px', fontWeight: 'bold', fontFamily: 'Arial', textAlign: 'center'}}>\r\n                Remember to save your plan before signing out! <br></br>\r\n                <Button color=\"danger\" onClick={this.handleSignOut} style={{width: '30%', margin: '10px'}}>Get me out of here!</Button>  \r\n              </div>\r\n            </Modal>\r\n            {this.state.isLoading ? <div style={{display: 'grid', position: 'absolute', width: '100vw', height: '100vh', alignItems: 'center', justifyItems: 'center', background: 'rgba(0,0,0,0.5)'}}><Spinner style={{width: '100px', height: '100px'}} color=\"light\" /></div> : null}\r\n            <Navbar color=\"light\" light expand=\"md\">\r\n              <div style={{position: \"absolute\", maxHeight: \"56px\", marginLeft: \"-10px\", cursor: \"pointer\"}} title=\"Click to reset to the previous saved point!\" onClick={() => window.location.reload()}><img src={PlaNUSIcon} alt=\"PlaNUS\" height=\"56\"></img></div>\r\n              <NavbarToggler onClick={this.toggle} />\r\n              <Collapse isOpen={this.state.isOpen} navbar>\r\n                <Nav className=\"ml-auto\" navbar>\r\n                  <NavItem>\r\n                    <NavLink style={{cursor: \"pointer\"}} onClick={this.props.toggleTimeline}>Timeline</NavLink>\r\n                  </NavItem>\r\n                  <CustomModule addToTimeline={this.props.addToTimeline} timelineData={this.props.timelineData} removeFromTimeline={this.props.removeFromTimeline}/>\r\n                  <NavItem style={{cursor: \"pointer\"}}>\r\n                    <NavLink onClick={this.handleSaveEvent}>Save</NavLink>\r\n                  </NavItem>\r\n                  <CourseInfo />\r\n                  <UncontrolledDropdown nav inNavbar>\r\n                    <DropdownToggle nav caret>\r\n                      Special Programmes\r\n                    </DropdownToggle>\r\n                    <DropdownMenu right>\r\n                      <NOC timelineData={this.props.timelineData} addToTimeline={this.props.addToTimeline} removeFromTimeline={this.props.removeFromTimeline}\r\n                      setNOC={this.setNOC}/>\r\n                      <DropdownItem divider />\r\n                      <DropdownItem onClick={()=>alert('Coming soon!')}>\r\n                        Research\r\n                      </DropdownItem>\r\n                      <DropdownItem divider />\r\n                      <Exchange timelineData={this.props.timelineData} addToTimeline={this.props.addToTimeline} removeFromTimeline={this.props.removeFromTimeline}\r\n                      setExchange={this.setExchange}/>\r\n                      <DropdownItem divider />\r\n                      <Internship />\r\n                    </DropdownMenu>\r\n                  </UncontrolledDropdown>\r\n                  <UncontrolledDropdown nav inNavbar>\r\n                    <DropdownToggle nav caret>\r\n                      Settings\r\n                    </DropdownToggle>\r\n                    <DropdownMenu right>\r\n                      <DropdownItem>\r\n                        Profile\r\n                      </DropdownItem>\r\n                      <DropdownItem>\r\n                        Help\r\n                      </DropdownItem>\r\n                      <DropdownItem divider />\r\n                      <DropdownItem onClick={() => this.handleExport(this.props.timelineData)}>\r\n                        Export Timeline\r\n                      </DropdownItem>\r\n                      <DropdownItem divider />\r\n                      <DropdownItem onClick={this.toggleSignOutModal}>\r\n                        Sign Out\r\n                      </DropdownItem>\r\n                    </DropdownMenu>\r\n                  </UncontrolledDropdown>\r\n                </Nav>\r\n              </Collapse>\r\n            </Navbar>\r\n          </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}